# üêß –û–¢–ß–ï–¢ –û –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–ò –° LINUX

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò

### üìä –ë–ê–ó–ê –î–ê–ù–ù–´–•

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚úÖ **–û–¢–õ–ò–ß–ù–û**
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 28,672 –±–∞–π—Ç (—Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –î–∞–Ω–Ω—ã–µ **–ù–ï —Å–ª–µ—Ç–∞—é—Ç** –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å–æ–≤–º–µ—Å—Ç–∏–º —Å Linux

### üóÉÔ∏è –°–¢–†–£–ö–¢–£–†–ê –¢–ê–ë–õ–ò–¶

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** ‚úÖ **–í–°–ï –¢–ê–ë–õ–ò–¶–´ –°–û–ó–î–ê–ù–´**

```sql
‚úÖ customers (id, name, phone, purchases, created_at, updated_at)
‚úÖ purchase_history (purchase_id, customer_id, timestamp)  
‚úÖ settings (key, value)
```

### üîÑ POSTGRES ‚Üí SQLITE FALLBACK

**–õ–æ–≥–∏–∫–∞:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û**

```javascript
1. –ü—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
2. –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ SQLite
3. –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª coffeemania.db –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### üìÅ –ü–£–¢–ò –ò –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨

**Linux –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –°–û–í–ú–ï–°–¢–ò–ú–û**

```javascript
// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è path.join() - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –û–°
const dbPath = path.join(__dirname, 'coffeemania.db');

// ‚úÖ –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã
app.use(express.static('public'));

// ‚úÖ Graceful shutdown - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ë–î
process.on('SIGINT', async () => { /* ... */ });
```

## üöÄ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï –ù–ê LINUX –°–ï–†–í–ï–†–ï

### 1. –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø

```bash
# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è PostgreSQL)
export NODE_ENV=production
export DATABASE_URL="postgresql://user:password@host:port/database"
export PORT=3000

# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (SQLite)
export NODE_ENV=development
export PORT=1000
```

### 2. –£–°–¢–ê–ù–û–í–ö–ê –ò –ó–ê–ü–£–°–ö

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone <repository>
cd coffeemania

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫
npm start
# –∏–ª–∏
node index.js
```

### 3. PM2 (–ü–†–û–î–ê–ö–®–ï–ù)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm install -g pm2

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞
cat > ecosystem.config.js << EOF
module.exports = {
  apps: [{
    name: 'coffeemania',
    script: 'index.js',
    instances: 1,
    autorestart: true,
    watch: false,
    max_memory_restart: '1G',
    env: {
      NODE_ENV: 'development',
      PORT: 1000
    },
    env_production: {
      NODE_ENV: 'production',
      PORT: 3000,
      DATABASE_URL: 'postgresql://...'
    }
  }]
};
EOF

# –ó–∞–ø—É—Å–∫
pm2 start ecosystem.config.js --env production
pm2 save
pm2 startup
```

### 4. NGINX (–ü–†–û–ö–°–ò–†–û–í–ê–ù–ò–ï)

```nginx
server {
    listen 80;
    server_name yourdomain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

## üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –ù–ê–î–ï–ñ–ù–û–°–¢–¨

### ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –ú–ï–†–´

- **Graceful shutdown** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ë–î –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- **Error handling** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ—Ö API endpoints  
- **Connection pooling** - –¥–ª—è PostgreSQL
- **SQL injection protection** - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **CORS** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∫—Ä–æ—Å—Å–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚úÖ –ü–û–°–¢–û–Ø–ù–°–¢–í–û –î–ê–ù–ù–´–•

- **SQLite —Ñ–∞–π–ª** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ
- **–î–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è** –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü
- **Backup-friendly** - –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å .db —Ñ–∞–π–ª

## üìä –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### SQLite (–¥–æ 1000 –∫–ª–∏–µ–Ω—Ç–æ–≤)
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ –¥–ª—è –º–∞–ª–æ–≥–æ/—Å—Ä–µ–¥–Ω–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã (—Ñ–∞–π–ª .db)

### PostgreSQL (1000+ –∫–ª–∏–µ–Ω—Ç–æ–≤)
- ‚úÖ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –î–õ–Ø –ú–ê–õ–û–ì–û –ë–ò–ó–ù–ï–°–ê
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQLite - –ø—Ä–æ—â–µ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
NODE_ENV=production
PORT=80
# DATABASE_URL –Ω–µ –Ω—É–∂–Ω–æ
```

### –î–õ–Ø –°–†–ï–î–ù–ï–ì–û+ –ë–ò–ó–ù–ï–°–ê  
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL
NODE_ENV=production
PORT=3000
DATABASE_URL=postgresql://user:pass@localhost/coffeemania
```

### –ú–û–ù–ò–¢–û–†–ò–ù–ì
```bash
# PM2 –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 monit

# –õ–æ–≥–∏
pm2 logs coffeemania

# –†–µ—Å—Ç–∞—Ä—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
pm2 restart coffeemania
```

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

### ‚úÖ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è, –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–ª–µ—Ç–∞—é—Ç
- **Linux —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** 100% –≥–æ—Ç–æ–≤–æ  
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** SQLite ‚Üí PostgreSQL
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** Graceful shutdown, error handling
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –û–¥–∏–Ω —Ñ–∞–π–ª index.js, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

### üöÄ –ú–û–ñ–ù–û –†–ê–ó–í–ï–†–¢–´–í–ê–¢–¨

–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ Linux —Å–µ—Ä–≤–µ—Ä–µ. –í—Å–µ –ø—É—Ç–∏, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å Unix-—Å–∏—Å—Ç–µ–º–∞–º–∏.

---

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 28.06.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **APPROVE FOR PRODUCTION** 